(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["praktikataotlus"],{7840:function(t,e,a){},"8a37":function(t,e,a){t.exports=a.p+"img/plus.d0f5911d.svg"},"8b2b":function(t,e,a){"use strict";var i=a("7840"),s=a.n(i);s.a},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("23cb"),n=a("a691"),r=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),p=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var a,i,d,u,p,m,k=o(this),_=r(k.length),b=s(t,_),y=arguments.length;if(0===y?a=i=0:1===y?(a=0,i=_-b):(a=y-2,i=f(v(n(e),0),_-b)),_+a-i>h)throw TypeError(g);for(d=l(k,i),u=0;u<i;u++)p=b+u,p in k&&c(d,u,k[p]);if(d.length=i,a<i){for(u=b;u<_-i;u++)p=u+i,m=u+a,p in k?k[m]=k[p]:delete k[m];for(u=_;u>_-i+a;u--)delete k[u-1]}else if(a>i)for(u=_-i;u>b;u--)p=u+i-1,m=u+a-1,p in k?k[m]=k[p]:delete k[m];for(u=0;u<a;u++)k[u+b]=arguments[u+2];return k.length=_-i+a,d}})},b0c0:function(t,e,a){var i=a("83ab"),s=a("9bf2").f,n=Function.prototype,r=n.toString,o=/^\s*function ([^ (]*)/,l="name";!i||l in n||s(n,l,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},d81d:function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").map,n=a("1dde"),r=a("ae40"),o=n("map"),l=r("map");i({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e8f4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h1",{staticClass:"headline text-center"},[t._v("Praktikataotlus")]),i("div",{staticClass:"internship-form"},[i("form",{on:{submit:function(t){t.preventDefault()},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[i("div",{attrs:{id:"student-form"}},[i("div",[i("h3",[t._v("Praktikandi andmed:")]),i("div",{staticClass:"form-item"},[i("label",[t._v("Õpilase nimi")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nimi,expression:"nimi"}],attrs:{type:"text"},domProps:{value:t.nimi},on:{input:function(e){e.target.composing||(t.nimi=e.target.value)}}})]),i("div",{staticClass:"form-item"},[i("label",[t._v("Eriala/Valdkond")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.eriala,expression:"eriala"}],attrs:{type:"text"},domProps:{value:t.eriala},on:{input:function(e){e.target.composing||(t.eriala=e.target.value)}}})]),i("div",{staticClass:"form-item"},[i("label",[t._v("Praktikaperiood")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.praktikaperiood,expression:"praktikaperiood"}],attrs:{type:"text"},domProps:{value:t.praktikaperiood},on:{input:function(e){e.target.composing||(t.praktikaperiood=e.target.value)}}})]),i("div",{staticClass:"form-item"},[i("label",[t._v("Praktika maht astronoomilistes tundides, EKAP-tes")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.praktika_maht,expression:"praktika_maht"}],attrs:{type:"text"},domProps:{value:t.praktika_maht},on:{input:function(e){e.target.composing||(t.praktika_maht=e.target.value)}}})]),i("div",{staticClass:"form-item"},[i("label",[t._v("Ettevõtte esindaja e-post:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.ettevote_email,expression:"ettevote_email"}],attrs:{type:"email"},domProps:{value:t.ettevote_email},on:{input:function(e){e.target.composing||(t.ettevote_email=e.target.value)}}})])]),i("div",{staticClass:"tasks"},[i("h3",[t._v("Ülesanded:")]),t._l(t.tasks,(function(e,s){return i("div",{key:s,staticClass:"form-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"task.title"}],ref:"task",refInFor:!0,attrs:{type:"text"},domProps:{value:e.title},on:{input:function(a){a.target.composing||t.$set(e,"title",a.target.value)}}}),s+1===t.tasks.length?i("span",{staticClass:"control",on:{click:t.addTask}},[i("img",{attrs:{src:a("8a37")}})]):t._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:s>0,expression:"index > 0"}],staticClass:"control",on:{click:function(e){return t.removeTask(s)}}},[i("img",{attrs:{src:a("e9b2")}})])])}))],2)]),i("div",{staticClass:"gdpr"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.gdpr,expression:"gdpr"}],attrs:{type:"checkbox",name:"gdpr",id:"gdpr"},domProps:{checked:Array.isArray(t.gdpr)?t._i(t.gdpr,null)>-1:t.gdpr},on:{change:function(e){var a=t.gdpr,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&(t.gdpr=a.concat([n])):r>-1&&(t.gdpr=a.slice(0,r).concat(a.slice(r+1)))}else t.gdpr=s}}}),t._m(0)]),i("input",{staticClass:"send_button",attrs:{type:"submit",value:"Saada"},on:{click:t.SendApplication}}),this.notification.message?i("div",{class:"message "+(this.notification.error?"is-danger":"is-success")},[i("button",{staticClass:"delete",on:{click:t.closeMessage}}),i("div",{staticClass:"message-body"},[t._v(t._s(this.notification.message))])]):t._e()])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"gdpr"}},[t._v("Olen tutvunud ja nõustun "),a("a",{attrs:{href:"/privaatsustingimused",target:"_blank"}},[t._v("privaatsustingimustega")]),t._v(".")])}],n=(a("4de4"),a("d81d"),a("a434"),a("b0c0"),a("bc3a")),r=a.n(n),o={name:"studentApplication",data:function(){return{nimi:"",eriala:"",praktikaperiood:"",praktika_maht:"",ettevote_email:"",tasks:[],blockRemoval:!0,gdpr:!1,notification:{message:null,error:!1}}},watch:{tasks:function(){this.blockRemoval=this.tasks.length<=1}},methods:{addTask:function(){var t=this,e=this.tasks.filter((function(t){return null===t.title}));e.length>=1&&this.tasks.length>0||(this.tasks.push({title:null}),this.tasks.length>1&&this.$nextTick((function(){var e=t.tasks.length-1,a=t.$refs.task[e];a.focus()})))},removeTask:function(t){this.blockRemoval||this.tasks.splice(t,1)},SendApplication:function(){var t=this,e={headers:{"Content-Type":"application/json"},withCredentials:!0};1==this.gdpr?(r.a.post("/api/taotlus",{opilase_nimi:this.nimi,eriala:this.eriala,periood:this.praktikaperiood,maht:this.praktika_maht,ettevote_email:this.ettevote_email,ulesanded:this.tasks.map((function(t){return t.title}))},e).then((function(){t.notification.message="Täname, taotlus on saadetud",t.notification.error=!1,setTimeout((function(){t.notification.message=null}),5e3)})).catch((function(e){e.response&&(t.notification.message=e.response.data.error,t.notification.error=!0)})),this.nimi="",this.eriala="",this.praktikaperiood="",this.praktika_maht="",this.ettevote_email="",this.tasks=[],this.addTask(),this.gdpr=!1):(this.notification.message="Kinnitage, et nõustute privaatsustingimustega",this.notification.error=!0)},closeMessage:function(){this.notification.message="",this.notification.error=!1},userInfo:function(){var t=this;r.a.get("/api/users/me",{withCredentials:!0}).then((function(e){t.$store.commit("SET_USER",e.data),t.nimi=e.data.name,"vs"===e.data.group?t.eriala="Noorem tarkvaraarendaja":"kd"===e.data.group?t.eriala="Kasutajakogemuse disaini nooremspetsialist":"is"===e.data.group?t.eriala="IT-süsteemide spetsialist":"isp"===e.data.group?t.eriala="IT-süsteemide spetsialist":"syst"===e.data.group?t.eriala="Süsteemiadministraator":"ita"===e.data.group&&(t.eriala="Tarkvaraarendaja")})).catch((function(t){throw t}))}},created:function(){this.userInfo()},mounted:function(){this.addTask()}},l=o,c=(a("8b2b"),a("2877")),d=Object(c["a"])(l,i,s,!1,null,"e790c556",null);e["default"]=d.exports},e9b2:function(t,e,a){t.exports=a.p+"img/minus.8b560310.svg"}}]);
//# sourceMappingURL=praktikataotlus.9feda4fe.js.map